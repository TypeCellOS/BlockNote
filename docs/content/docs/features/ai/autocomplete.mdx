---
title: Autocomplete
description: Add AI-powered autocomplete suggestions to your BlockNote editor
imageTitle: BlockNote AI Autocomplete
---

import { TypeTable } from 'fumadocs-ui/components/type-table';

# AI Autocomplete

The AI Autocomplete extension provides real-time, AI-powered text completion suggestions as users type. 
When enabled, the editor will display inline suggestions that can be accepted with the **Tab** key or dismissed with **Escape**.

## Installation

First, ensure you have the `@blocknote/xl-ai` package installed:

```bash
npm install @blocknote/xl-ai
```

## Basic Setup

To enable AI autocomplete in your editor, add the `AIAutoCompleteExtension` to your editor configuration:

```tsx
import { useCreateBlockNote } from "@blocknote/react";
import { AIAutoCompleteExtension } from "@blocknote/xl-ai";
import { en as aiEn } from "@blocknote/xl-ai/locales";
import "@blocknote/xl-ai/style.css";

const editor = useCreateBlockNote({
  dictionary: {
    ...en,
    ai: aiEn, // add translations for the AI extension
  },
  extensions: [
    AIAutoCompleteExtension({
      // Fetch suggestions from this URL
      provider: "/api/autocomplete",
    }),
  ],
});
```

## Configuration

The `AIAutoCompleteExtension` accepts the following options:

<TypeTable
  type={{
    provider: {
      description: 'URL to fetch suggestions from, or a custom provider function.',
      type: 'string | function',
      required: true
    },
    contextLength: {
      description: 'Number of characters of context to send to your backend when using a URL provider.',
      type: 'number',
      default: '300'
    },
    acceptKey: {
      description: 'Key to accept the current suggestion.',
      type: 'string',
      default: '"Tab"'
    },
    cancelKey: {
      description: 'Key to discard suggestions.',
      type: 'string',
      default: '"Escape"'
    },
    debounceDelay: {
      description: 'Delay in ms before fetching suggestions.',
      type: 'number',
      default: '300'
    }
  }}
/>

### Using a Custom Provider

When you provide a URL (`string`) as provider, the extension will use the default provider that fetches suggestions from that URL.

Alternatively, you can provide a custom provider function that should return an array of suggestions at the current cursor position.

## Backend Integration

The default URL provider sends a `POST` request with the following body:

```json
{
  "text": "The last 300 characters of text before the cursor"
}
```

It expects a JSON response with an array of suggestion strings:

```json
{
  "suggestions": ["completion text", "more text"]
}
```

When multiple suggestions are returned, the first one will be used by default. As the user continues typing, the extension will automatically select alternative matching suggestions (or do a new backend requests if none of the cached suggestions match).

Here's an example API route using the Vercel AI SDK with Mistral's Codestral model:

<Callout type="info">
  **Codestral** is a code completion model that excels in latency (for as-you-type suggestions you want a fast model). 
  Even though it's designed for code completion, we can use it for general text completion as well.
  See the [reference implementation](https://github.com/TypeCellOS/BlockNote/blob/main/packages/xl-ai-server/src/routes/autocomplete.ts) for a complete example.
</Callout>

```typescript
// app/api/autocomplete/route.ts
import { createMistral } from "@ai-sdk/mistral";
import { generateText } from "ai";

const model = createMistral({
  apiKey: process.env.MISTRAL_API_KEY,
})("codestral-latest");

export async function POST(req: Request) {
  const { text } = await req.json();

  const result = await generateText({
    model,
    system: `You are a writing assistant. Predict the most likely next part of the text.
- Provide up to 3 suggestions separated by newlines
- Keep suggestions short (max 5 words each)
- Only return the text to append (no explanations)
- Add a space before the suggestion if starting a new word`,
    messages: [
      {
        role: "user",
        content: `Complete the following text: \n${text}[SUGGESTION_HERE]`,
      },
    ],
    abortSignal: req.signal,
  });

  return Response.json({
    suggestions: result.text
      .split("\n")
      .map((s) => s.trimEnd())
      .filter((s) => s.trim().length > 0),
  });
}
```

## Programmatic Control

You can also control the autocomplete extension programmatically:

```typescript
const ext = editor.extensions.aiAutoCompleteExtension;

// Accept the current suggestion
ext.acceptAutoCompleteSuggestion();

// Discard suggestions
ext.discardAutoCompleteSuggestions();
```